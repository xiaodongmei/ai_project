<view class="container">
  <view class="login-wrapper">
    <!-- 头部logo -->
    <view class="header">
      <view class="logo">💆</view>
      <view class="title">养生店管理</view>
      <view class="subtitle">小程序客户端</view>
    </view>

    <!-- 登录模式切换 -->
    <view class="mode-tabs">
      <view
        class="mode-tab {{loginMode === 'password' ? 'active' : ''}}"
        data-mode="password"
        bindtap="switchLoginMode"
      >
        密码登录
      </view>
      <view
        class="mode-tab {{loginMode === 'code' ? 'active' : ''}}"
        data-mode="code"
        bindtap="switchLoginMode"
      >
        验证码登录
      </view>
    </view>

    <!-- 密码登录表单 -->
    <view wx:if="{{loginMode === 'password'}}" class="login-form">
      <view class="form-group">
        <input
          class="form-input"
          type="tel"
          placeholder="请输入手机号"
          value="{{phone}}"
          bindinput="onPhoneInput"
          placeholder-style="color: #bbb;"
        />
      </view>

      <view class="form-group password-group">
        <input
          class="form-input"
          type="{{showPassword ? 'text' : 'password'}}"
          placeholder="请输入密码"
          value="{{password}}"
          bindinput="onPasswordInput"
          placeholder-style="color: #bbb;"
        />
        <view class="password-toggle" bindtap="togglePasswordVisibility">
          {{showPassword ? '👁️' : '👁️‍🗨️'}}
        </view>
      </view>

      <button
        class="btn btn-primary"
        bindtap="loginWithPassword"
        loading="{{loading}}"
        disabled="{{loading}}"
      >
        {{loading ? '登录中...' : '登录'}}
      </button>
    </view>

    <!-- 验证码登录表单 -->
    <view wx:if="{{loginMode === 'code'}}" class="login-form">
      <view class="form-group">
        <input
          class="form-input"
          type="tel"
          placeholder="请输入手机号"
          value="{{phone}}"
          bindinput="onPhoneInput"
          placeholder-style="color: #bbb;"
        />
      </view>

      <view class="form-group code-group">
        <input
          class="form-input"
          type="text"
          placeholder="请输入验证码"
          value="{{verificationCode}}"
          bindinput="onCodeInput"
          placeholder-style="color: #bbb;"
          maxlength="6"
        />
        <button
          class="code-btn"
          bindtap="sendVerificationCode"
          disabled="{{codeCountdown > 0}}"
        >
          {{codeCountdown > 0 ? codeCountdown + 's' : '获取验证码'}}
        </button>
      </view>

      <button
        class="btn btn-primary"
        bindtap="loginWithCode"
        loading="{{loading}}"
        disabled="{{loading}}"
      >
        {{loading ? '登录中...' : '登录'}}
      </button>
    </view>

    <!-- 微信登录按钮 -->
    <view class="divider">
      <view class="divider-line"></view>
      <text class="divider-text">或使用微信登录</text>
      <view class="divider-line"></view>
    </view>

    <button
      class="btn btn-wechat"
      bindtap="loginWithWeChat"
      open-type="getUserInfo"
      disabled="{{loading}}"
    >
      🔗 微信登录
    </button>

    <!-- 底部提示 -->
    <view class="footer">
      <text class="footer-text">首次登录会自动创建账户</text>
    </view>
  </view>
</view>
