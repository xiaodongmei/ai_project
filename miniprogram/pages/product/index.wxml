<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <input
        class="search-input"
        type="text"
        placeholder="æœç´¢äº§å“..."
        value="{{searchText}}"
        bindinput="onSearch"
        bindconfirm="performSearch"
      />
      <view class="search-icon">ğŸ”</view>
    </view>
    <view wx:if="{{searchText}}" class="clear-btn" bindtap="clearSearch">æ¸…é™¤</view>
  </view>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <scroll-view class="category-scroll" scroll-x="true" scroll-left="0">
    <view
      class="category-item {{currentCategory === 'all' ? 'active' : ''}}"
      data-id="all"
      bindtap="onCategoryChange"
    >
      å…¨éƒ¨äº§å“
    </view>
    <view
      wx:for="{{categories}}"
      wx:key="id"
      class="category-item {{currentCategory === item.id ? 'active' : ''}}"
      data-id="{{item.id}}"
      bindtap="onCategoryChange"
    >
      {{item.name}}
    </view>
  </scroll-view>

  <!-- äº§å“åˆ—è¡¨ -->
  <view wx:if="{{!loading && products.length === 0}}" class="empty-state">
    <view class="empty-icon">ğŸ“¦</view>
    <view class="empty-text">æš‚æ— äº§å“</view>
  </view>

  <view class="products-grid">
    <view wx:for="{{products}}" wx:key="id" class="product-card">
      <view class="product-image-wrapper" bindtap="viewProductDetail" data-id="{{item.id}}">
        <image class="product-image" src="{{item.image_url || '/images/placeholder.png'}}" />
        <view wx:if="{{item.is_featured}}" class="featured-badge">æ¨è</view>
      </view>

      <view class="product-info">
        <view class="product-name">{{item.name}}</view>
        <view class="product-description">{{item.description}}</view>

        <view class="product-footer">
          <view class="product-price">
            <view class="price-label">Â¥</view>
            <view class="price-value">{{item.member_price || item.non_member_price}}</view>
          </view>
          <view
            class="add-to-cart-btn"
            bindtap="quickAddToCart"
            data-product="{{item}}"
          >
            åŠ å…¥è´­ç‰©è½¦
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½æç¤º -->
  <view wx:if="{{loading}}" class="loading-indicator">
    <view class="spinner"></view>
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>

  <view wx:if="{{!hasMore && products.length > 0}}" class="no-more">
    å·²ç»æ²¡æœ‰æ›´å¤šäº§å“äº†
  </view>

  <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
  <view wx:if="{{scrollTop > 300}}" class="scroll-to-top" bindtap="scrollToTop">
    â†‘
  </view>
</view>
